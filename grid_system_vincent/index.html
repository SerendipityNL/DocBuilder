<!DOCTYPE html>
<html>
	<head>
		<title>DocBuilder</title>
		<link rel="stylesheet" type="text/css" href="stylesheet.css">
		<script type="text/javascript" src="jquery-1.9.1.min.js"></script>
		<script type="text/javascript" src="jquery.autosize-min.js"></script>
	</head>
	<body>
		<div id="document">

			<a href="#" id="toggle_borders">Toggle borders</a>

			<h1>Lorem ipsum dolor sit amet</h1>

			<div class="col_2">
				<div class="col_content">
					<ul class="col_actions">
						<li><a href="#" class="resize">Resize</a></li>
						<li><a href="#" class="edit">Edit</a></li>
						<!--<li><a href="#" class="set_size">1</a></li>
						<li><a href="#" class="set_size">2</a></li>
						<li><a href="#" class="set_size">3</a></li>
						<li><a href="#" class="set_size">4</a></li>-->
					</ul>
					<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nam sodales facilisis risus, ut varius leo lacinia a. Mauris iaculis congue pulvinar. Etiam metus dui, posuere ac pharetra ut, interdum in massa. Aenean a augue dolor, ac auctor ante. Cras quis mauris sit amet massa eleifend interdum laoreet non lacus. Morbi nisi tortor, ullamcorper nec venenatis sit amet, rutrum at erat. Nullam posuere ligula a felis euismod quis laoreet sapien iaculis.</p>
				</div>
			</div>

			<div class="col_2">
				<div class="col_content">
					<ul class="col_actions">
						<li><a href="#" class="resize">Resize</a></li>
						<!--<li><a href="#" class="set_size">1</a></li>
						<li><a href="#" class="set_size">2</a></li>
						<li><a href="#" class="set_size">3</a></li>
						<li><a href="#" class="set_size">4</a></li>-->
					</ul>
					<p><img src="ferrari_458_02.jpg" width="100%"></p>
				</div>
			</div>

			<div class="col_4">
				<div class="col_content">
					<ul class="col_actions">
						<li><a href="#" class="resize">Resize</a></li>
						<!--<li><a href="#" class="edit">Edit</a></li>
						<li><a href="#" class="set_size">1</a></li>
						<li><a href="#" class="set_size">2</a></li>
						<li><a href="#" class="set_size">3</a></li>
						<li><a href="#" class="set_size">4</a></li>-->
					</ul>
					<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nam sodales facilisis risus, ut varius leo lacinia a. Mauris iaculis congue pulvinar. Etiam metus dui, posuere ac pharetra ut, interdum in massa. Aenean a augue dolor, ac auctor ante. Cras quis mauris sit amet massa eleifend interdum laoreet non lacus. Morbi nisi tortor, ullamcorper nec venenatis sit amet, rutrum at erat. Nullam posuere ligula a felis euismod quis laoreet sapien iaculis. Duis venenatis, lacus iaculis consequat pharetra, arcu eros vehicula enim, viverra faucibus urna quam molestie eros. Mauris egestas ipsum a massa feugiat ullamcorper. Donec sed turpis ut elit suscipit ullamcorper. Maecenas vitae nisl vitae velit tristique feugiat. Curabitur elementum, lacus eu placerat malesuada, eros velit consequat lorem, et ullamcorper tellus nisl sit amet lectus. Proin dictum libero ultricies neque sodales nec vestibulum magna consectetur.</p>
				</div>
			</div>

			<div class="col_3">
				<div class="col_content">
					<ul class="col_actions">
						<li><a href="#" class="resize">Resize</a></li>
						<!--<li><a href="#" class="set_size">1</a></li>
						<li><a href="#" class="set_size">2</a></li>
						<li><a href="#" class="set_size">3</a></li>
						<li><a href="#" class="set_size">4</a></li>-->
					</ul>
					<ul>
						<li>Lorem ipsum dolor sit</li>
						<li>Nam sodales facilisis risus, ut varius leo lacinia a.</li>
						<li>Duis venenatis, lacus iaculis consequat pharetra</li>
						<li>Proin dictum libero ultricies</li>
						<li>Mauris at nisl metus, et tincidunt tellus</li>
					</ul>
				</div>
			</div>

			<div class="col_1">
				<div class="col_content">
					<ul class="col_actions">
						<li><a href="#" class="resize">Resize</a></li>
						<!--<li><a href="#" class="set_size">1</a></li>
						<li><a href="#" class="set_size">2</a></li>
						<li><a href="#" class="set_size">3</a></li>
						<li><a href="#" class="set_size">4</a></li>-->
					</ul>
					<p><img src="ferrari_logo.jpg" width="100%"></p>
				</div>
			</div>

			<div class="col_4">
				<div class="col_content">
					<ul class="col_actions">
						<!--<li><a href="#" class="resize">Resize</a></li>-->
						<li><a href="#" class="edit">Edit</a></li>
						<li><a href="#" class="set_size">1</a></li>
						<li><a href="#" class="set_size">2</a></li>
						<li><a href="#" class="set_size">3</a></li>
						<li><a href="#" class="set_size">4</a></li>
					</ul>
					<p>Praesent pellentesque tincidunt nunc, vel condimentum augue cursus a. Sed sodales hendrerit odio, dapibus dignissim lectus venenatis nec. Suspendisse et tortor turpis, at volutpat mauris. Donec vitae est justo, sed luctus dolor. Aenean ullamcorper ligula id turpis bibendum faucibus sit amet at tellus. Nam sit amet velit nec erat porta gravida.</p>
				</div>
			</div>

			<div class="col_4">
				<div class="col_content">
					<ul class="col_actions">
						<!--<li><a href="#" class="resize">Resize</a></li>-->
						<li><a href="#" class="edit">Edit</a></li>
						<li><a href="#" class="set_size">1</a></li>
						<li><a href="#" class="set_size">2</a></li>
						<li><a href="#" class="set_size">3</a></li>
						<li><a href="#" class="set_size">4</a></li>
					</ul>
					<p>Etiam elementum, lorem non mollis aliquet, erat urna eleifend dolor, a adipiscing orci urna ac dui. Nullam dictum quam at velit aliquet a faucibus quam pellentesque. Cras bibendum faucibus egestas. Nam at quam a velit suscipit venenatis.</p>
				</div>
			</div>

		</div>

		<script type="text/javascript">



		$('.edit').on('click', function(e) {
			e.preventDefault();

			var element = $(this).parent().parent().next('p');

			if ($(this).text() == 'Edit') {
				$(this).addClass('save').text('Save');

				var text = element.text()
					height = element.height();
				element.text('');

				element.append('<textarea>' + text + '</textarea>');
				element.find('textarea').focus();

				// Focus after text:
				//$('textarea', element).focus().val(text);
				

			}
			else {
				$(this).removeClass('save').text('Edit');
				var text = element.find('textarea').val();;
				$('textarea', element).remove();
				element.text(text);
			}
			reload_functions(element);
		});

		function reload_functions(element, btn) {
			$('textarea').on('focusout', function() {
				$('.edit', element.parent()).removeClass('save').text('Edit');
				var text = $('textarea', element).val();
				$('textarea', element).remove();
				element.text(text);
			});

			$('textarea').autosize();
		}		

		$('.resize').on('click', (function(e) {
			e.preventDefault();

			var myparent = $(this).parent().parent().parent().parent();

			if ($(myparent).hasClass('col_1')) {
				$(myparent).removeClass('col_1');
				$(myparent).addClass('col_2');
			}
			else if ($(myparent).hasClass('col_2')) {
				$(myparent).removeClass('col_2');
				$(myparent).addClass('col_3');
			}
			else if ($(myparent).hasClass('col_3')) {
				$(myparent).removeClass('col_3');
				$(myparent).addClass('col_4');
			}
			else {
				$(myparent).removeClass('col_4');
				$(myparent).addClass('col_1');
			}
		}));

		$('.set_size').on('click', function(e) {
			e.preventDefault();
			var num = $(this).text();

			var myparent = $(this).parent().parent().parent().parent();
			$(myparent).removeClass('col_1 col_2 col_3 col_4');
			$(myparent).addClass('col_' + num);


			console.log(num);
		});

		$('#toggle_borders').on('click', function(e) {
			e.preventDefault();
			$('.col_content').toggleClass('resizeable');
		});
		
		</script>
	</body>
</html>